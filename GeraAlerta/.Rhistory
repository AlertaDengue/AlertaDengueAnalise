mtext(listaAPS[1],cex=0.8,line=-1)
axis(2)
box()
for (j in 2:10) {
plot(d4$casos[d4$APS==listaAPS[j]],xlab="",ylab="Rt",axes=FALSE,type="l",xlim=xlim)
lines(d4$casos_est[d4$APS==listaAPS[j]],col=2)
axis(2)
mtext(listaAPS[j],cex=0.8,line=-1)
box()
}
par(mfrow=c(5,2),mar=c(2,2,2,2))
plot(d4$casos[d4$APS=="AP1"],xlab="",ylab="Rt",axes=FALSE,type="l",xlim=xlim)
lines(d4$casos_est[d4$APS=="AP1"],col=2)
mtext("Rt")
mtext(listaAPS[1],cex=0.8,line=-1)
axis(2)
axis(1)
box()
seq(xlim)
xlim
seque = seq(xlim[1],xlim[2],by=10)
d4$SE[seque]
seque
?seq
seque = seq(xlim[1],xlim[2],by=10)
seque
d4$SE[d4$APS=="AP1"][seque]
d4$SE[d4$APS=="AP1"]
xlim
le=length(d$SE[d$APS=="AP1"])
xlim=c((le-70),le)
xlim
le=length(d4$SE[d4$APS=="AP1"])
xlim=c((le-70),le)
par(mfrow=c(5,2),mar=c(2,2,2,2))
plot(d4$casos[d4$APS=="AP1"],xlab="",ylab="Rt",axes=FALSE,type="l",xlim=xlim)
lines(d4$casos_est[d4$APS=="AP1"],col=2)
mtext("Rt")
mtext(listaAPS[1],cex=0.8,line=-1)
axis(2)
seque = seq(xlim[1],xlim[2],by=10)
axis(1,at=seque,labels=d4$SE[d4$APS=="AP1"][seque]
box()
xlim
seque
d4$SE[d4$APS=="AP1"][seque]
axis(1,at=seque,labels=d4$SE[d4$APS=="AP1"][seque]
)
le=length(d4$SE[d4$APS=="AP1"])
xlim=c((le-70),le)
par(mfrow=c(5,2),mar=c(2,2,2,2))
plot(d4$casos[d4$APS=="AP1"][xlim[1]:xlim[2]],xlab="",ylab="Rt",axes=FALSE,type="l",xlim=xlim)
lines(d4$casos_est[d4$APS=="AP1"],col=2)
le=length(d4$SE[d4$APS=="AP1"])
xlim=c((le-70),le)
par(mfrow=c(5,2),mar=c(2,2,2,2))
d4$casos[d4$APS=="AP1"][xlim[1]:xlim[2]]
plot(d4$casos[d4$APS=="AP1"][xlim[1]:xlim[2]],xlab="",ylab="Rt",axes=FALSE,type="l",xlim=xlim)
d4$casos[d4$APS=="AP1"][xlim[1]:xlim[2]]
plot(d4$casos[d4$APS=="AP1"][xlim[1]:xlim[2]],xlab="",ylab="Rt",axes=FALSE,type="l")
le=length(d4$SE[d4$APS=="AP1"])
xlim=c((le-70),le)
par(mfrow=c(5,2),mar=c(2,2,2,2))
plot(d4$casos[d4$APS=="AP1"][xlim[1]:xlim[2]],xlab="",ylab="Rt",axes=FALSE,type="l")
lines(d4$casos_est[d4$APS=="AP1"],col=2)
mtext("Rt")
mtext(listaAPS[1],cex=0.8,line=-1)
axis(2)
le=length(d4$SE[d4$APS=="AP1"])
xlim=c((le-70),le)
par(mfrow=c(5,2),mar=c(2,2,2,2))
plot(d4$casos[d4$APS=="AP1"][xlim[1]:xlim[2]],xlab="",ylab="Rt",axes=FALSE,type="l")
lines(d4$casos_est[d4$APS=="AP1"],col=2)
mtext(listaAPS[1],cex=0.8,line=-1)
axis(2)
seque = seq(xlim[1],xlim[2],by=10)
axis(1,at=seque,labels=d4$SE[d4$APS=="AP1"][seque])
box()
seque = seq(1,xlim[2],by=10)
seque
seque = seq(1,(xlim[2]-xlim[1]),by=10)
seque
axis(1,at=seque,labels=d4$SE[d4$APS=="AP1"][seque])
box()
for (j in 2:10) {
plot(d4$casos[d4$APS==listaAPS[j]][xlim[1]:xlim[2]],xlab="",ylab="Rt",axes=FALSE,type="l")
lines(d4$casos_est[d4$APS==listaAPS[j]],col=2)
axis(2)
mtext(listaAPS[j],cex=0.8,line=-1)
box()
}
le=length(d4$SE[d4$APS=="AP1"])
xlim=c((le-70),le)
par(mfrow=c(5,2),mar=c(2,2,2,2))
plot(d4$casos[d4$APS=="AP1"][xlim[1]:xlim[2]],xlab="",ylab="Rt",axes=FALSE,type="l")
lines(d4$casos_est[d4$APS=="AP1"][xlim[1]:xlim[2]],col=2)
mtext(listaAPS[1],cex=0.8,line=-1)
axis(2)
seque = seq(1,(xlim[2]-xlim[1]),by=10) # label x
axis(1,at=seque,labels=d4$SE[d4$APS=="AP1"][seque])
box()
for (j in 2:10) {
plot(d4$casos[d4$APS==listaAPS[j]][xlim[1]:xlim[2]],xlab="",ylab="Rt",axes=FALSE,type="l")
lines(d4$casos_est[d4$APS==listaAPS[j]][xlim[1]:xlim[2]],col=2)
axis(2)
mtext(listaAPS[j],cex=0.8,line=-1)
box()
}
le=length(d4$SE[d4$APS=="AP1"])
xlim=c((le-70),le)
par(mfrow=c(5,2),mar=c(2,2,0,0))
plot(d4$casos[d4$APS=="AP1"][xlim[1]:xlim[2]],xlab="",ylab="Rt",axes=FALSE,type="l")
lines(d4$casos_est[d4$APS=="AP1"][xlim[1]:xlim[2]],col=2)
mtext(listaAPS[1],cex=0.8,line=-1)
axis(2)
seque = seq(1,(xlim[2]-xlim[1]),by=10) # label x
axis(1,at=seque,labels=d4$SE[d4$APS=="AP1"][seque])
box()
for (j in 2:10) {
plot(d4$casos[d4$APS==listaAPS[j]][xlim[1]:xlim[2]],xlab="",ylab="Rt",axes=FALSE,type="l")
lines(d4$casos_est[d4$APS==listaAPS[j]][xlim[1]:xlim[2]],col=2)
axis(2)
mtext(listaAPS[j],cex=0.8,line=-1)
box()
}
le=length(d4$SE[d4$APS=="AP1"])
xlim=c((le-70),le)
par(mfrow=c(5,2),mar=c(2,2,0,0))
plot(d4$casos[d4$APS=="AP1"][xlim[1]:xlim[2]],xlab="",ylab="Rt",axes=FALSE,type="l")
lines(d4$casos_est[d4$APS=="AP1"][xlim[1]:xlim[2]],col=2)
mtext(listaAPS[1],cex=0.8,line=-1)
axis(2)
seque = seq(1,(xlim[2]-xlim[1]),by=10) # label x
axis(1,at=seque,labels=d4$SE[d4$APS=="AP1"][seque])
box()
for (j in 2:10) {
plot(d4$casos[d4$APS==listaAPS[j]][xlim[1]:xlim[2]],xlab="",ylab="Rt",axes=FALSE,type="l")
lines(d4$casos_est[d4$APS==listaAPS[j]][xlim[1]:xlim[2]],col=2)
axis(2)
axis(1,at=seque,labels=d4$SE[d4$APS=="AP1"][seque])
mtext(listaAPS[j],cex=0.8,line=-1)
box()
}
le=length(d4$SE[d4$APS=="AP1"])
xlim=c((le-70),le)
par(mfrow=c(5,2),mar=c(2,2,0,0))
plot(d4$casos[d4$APS=="AP1"][xlim[1]:xlim[2]],xlab="",ylab="Rt",axes=FALSE,type="l")
lines(d4$casos_est[d4$APS=="AP1"][xlim[1]:xlim[2]],col=2)
mtext(listaAPS[1],cex=0.8,line=-1)
axis(2)
seque = seq(1,(xlim[2]-xlim[1]),by=10) # label x
axis(1,at=seque,labels=d4$SE[d4$APS=="AP1"][seque])
box()
for (j in 2:10) {
plot(d4$casos[d4$APS==listaAPS[j]][xlim[1]:xlim[2]],xlab="",ylab="Rt",axes=FALSE,type="l")
lines(d4$casos_est[d4$APS==listaAPS[j]][xlim[1]:xlim[2]],col=2)
axis(2)
mtext(listaAPS[j],cex=0.8,line=-1)
box()
}
setwd("~/Documents/Linhas de Pesquisa/Dengue/alerta/GeraAlerta")
dadosAPS<-"dados_limpos/dadosAPS_201425.csv"
knit(input="geraAlerta/geraAlertaAPS.rmd",quiet=TRUE,output="geraAlerta/geraAlertaAPS.md",
envir=new.env())
markdownToHTML("geraAlerta/geraAlertaAPS.md", "html/AlertaAPS.html",fragment.only = TRUE)
dadosAPS<-"dados_limpos/dadosAPS_201425.csv"
knit(input="geraAlerta/geraAlertaAPS.rmd",quiet=TRUE,output="geraAlerta/geraAlertaAPS.md",
envir=new.env())
markdownToHTML("geraAlerta/geraAlertaAPS.md", "html/AlertaAPS.html",fragment.only = TRUE)
par(mfrow=c(5,2),mar=c(1,2,1,1))
plot(d2$Rt[d2$APS=="AP1"],ylim=range(0.3,3),xlab="",ylab="Rt",axes=FALSE,type="l")
mtext(listaAPS[1],cex=0.8,line=-1)
axis(2)
abline(h=1,col=2)
box()
for (j in 2:10) {
plot(d2$Rt[d2$APS==listaAPS[j]],ylim=range(0.3,3),xlab="",ylab="Rt",axes=FALSE,type="l")
axis(2)
mtext(listaAPS[(j-1)],cex=0.8,line=-1)
box()
abline(h=1,col=2)
}
dadosAPS<-"dados_limpos/dadosAPS_201425.csv"
knit(input="geraAlerta/geraAlertaAPS.rmd",quiet=TRUE,output="geraAlerta/geraAlertaAPS.md",
envir=new.env())
markdownToHTML("geraAlerta/geraAlertaAPS.md", "html/AlertaAPS.html",fragment.only = TRUE)
knit(input="geraAlerta/geraAlertaAPS.rmd",quiet=TRUE,output="geraAlerta/geraAlertaAPS.md",
envir=new.env())
markdownToHTML("geraAlerta/geraAlertaAPS.md", "html/AlertaAPS.html",fragment.only = TRUE)
tail(d)
dc <- d[d$APS=="AP1",c("SE","casos")]
dc
dc[267,]<-c(201426,NA)
dc
na.omit(dc)
dc <-na.omit(dc)
uSE <- max(dc$SE)
uSE
dc <- d2[d2$APS=="AP1",c("SE","tweet")]
names(d2)
names(d)
dc <- d[d$APS=="AP1",c("SE","tweets")]
dc <-na.omit(dc)
uSE <- max(dc$SE)
uSE
tail(d)
tail(d)[,c(1,2)]
plot(d$tweets[d$APS=="AP1"])
par(mfrow=c(1,1))
plot(d$tweets[d$APS=="AP1"],type="l")
par(mfrow=c(1,1),mar=4,4,4,1)
plot(d$tweets[d$APS=="AP1"],type="l")
par(mfrow=c(1,1),mar=c(4,4,4,1))
plot(d$tweets[d$APS=="AP1"],type="l")
tail(d)[,c(1,2)]
par(mfrow=c(1,1),mar=c(4,4,4,1))
plot(d$tweets[d$APS=="AP1"],type="l",ylab="tweets",axes=FALSE)
axis(2)
tail(d)[,c(1,2)]
par(mfrow=c(1,1),mar=c(4,4,4,1))
plot(d$tweets[d$APS=="AP1"],type="l",ylab="tweets",axes=FALSE,xlab="")
axis(2)
d3<-merge(d2,d[,c("SE","APS","tweets","casos","temp.mean","temp.sd","temp.min","temp.max",
"umid.mean","umid.sd","umid.min","umid.max")],by=c("SE","APS"),all=TRUE)
listaAP <- unique(d4$APS)
par(mfrow=c(4,1),mar=c(0,0,0,0))
ap="AP1"
plot(d4$casos[d4$APS==ap],type='l',axes=F)
text(10,0.9*max(d4$casos[d4$APS==ap]),"Temp>24",cex=1.4)
text(80,0.9*max(d4$casos[d4$APS==ap]),labels=as.character(ap),cex=1.4)
abline(v=which(d4$alertaTemp[d4$APS==ap]==1),col=655,lwd=1.2)
plot(d4$casos[alertaAP$APS==ap],type='l',axes=F)
plot(d4$casos[d4$APS==ap],type='l',axes=F)
text(10,0.9*max(d4$casos[d4$APS==ap]),"Rt>1",cex=1.4)
abline(v=which(d4$alertaRt1[d4$APS==ap]==1),col="yellow",lwd=1.2)
plot(d4$casos[d4$APS==ap],type='l',axes=F)
abline(v=which(d4$alertaCasos[d4$APS==ap]==1),col="red",lwd=1.2)
abline(v=which(d4$alertaCasos[d4$APS==ap]==1),col="yellow",lwd=1.2)
text(20,0.9*max(d4$casos[d4$APS==ap]),"casos>media+2sd",cex=1.4)
plot(d4$tweets[d4$APS==ap],type='l',axes=F)
d4$alertaCasos<-ifelse(d4$casos_est>d4$casos_crit,1,0)
names(d4)
meaninc<-tapply(d$casos,d$APS,mean,na.rm=TRUE)
sdinc<-tapply(d$casos,d$APS,sd,na.rm=TRUE)
limiarinc<-meaninc+1.96*sdinc
d4$casos_crit<-NA
for (i in 1:dim(d4)[1]){
aps <- which(listaAPS==d4$APS[i])
d4$casos_crit[i] <- limiarinc[aps]
}
d4$alertaCasos<-ifelse(d4$casos_est>d4$casos_crit,1,0)
listaAP <- unique(d4$APS)
plot.alerta<-function(ap){
par(mfrow=c(3,1),mar=c(0,0,0,0))
plot(d4$casos[d4$APS==ap],type='l',axes=F)
text(10,0.9*max(d4$casos[d4$APS==ap]),"Temp>22",cex=1.4)
text(80,0.9*max(d4$casos[d4$APS==ap]),labels=as.character(ap),cex=1.4)
abline(v=which(d4$alertaTemp[d4$APS==ap]==1),col=655,lwd=1.2)
plot(d4$casos[d4$APS==ap],type='l',axes=F)
text(10,0.9*max(d4$casos[d4$APS==ap]),"Rt>1",cex=1.4)
abline(v=which(d4$alertaRt1[d4$APS==ap]==1),col="yellow",lwd=1.2)
plot(d4$casos[d4$APS==ap],type='l',axes=F)
abline(v=which(d4$alertaCasos[d4$APS==ap]==1),col="yellow",lwd=1.2)
text(20,0.9*max(d4$casos[d4$APS==ap]),"casos>media+2sd",cex=1.4)
}
abline(v=which(d4$alertaTemp[d4$APS==ap]==1),col="655"lightgrey,lwd=1.2)
abline(v=which(d4$alertaTemp[d4$APS==ap]==1),col="655"lightgrey,lwd=1.2)
abline(v=which(d4$alertaTemp[d4$APS==ap]==1),col="lightgrey",lwd=1.2)
abline(v=which(d4$alertaTemp[d4$APS==ap]==1),col="grey",lwd=1.2)
listaAP <- unique(d4$APS)
plot.alerta<-function(ap){
par(mfrow=c(3,1),mar=c(0,0,0,0))
plot(d4$casos[d4$APS==ap],type='l',axes=F)
text(10,0.9*max(d4$casos[d4$APS==ap]),"Temp>22",cex=1.4)
text(80,0.9*max(d4$casos[d4$APS==ap]),labels=as.character(ap),cex=1.4)
abline(v=which(d4$alertaTemp[d4$APS==ap]==1),col="grey",lwd=1.2)
plot(d4$casos[d4$APS==ap],type='l',axes=F)
text(10,0.9*max(d4$casos[d4$APS==ap]),"Rt>1",cex=1.4)
abline(v=which(d4$alertaRt1[d4$APS==ap]==1),col="grey",lwd=1.2)
plot(d4$casos[d4$APS==ap],type='l',axes=F)
abline(v=which(d4$alertaCasos[d4$APS==ap]==1),col="grey",lwd=1.2)
text(20,0.9*max(d4$casos[d4$APS==ap]),"casos>media+2sd",cex=1.4)
}
dadosAPS<-"dados_limpos/dadosAPS_201425.csv"
knit(input="geraAlerta/geraAlertaAPS.rmd",quiet=TRUE,output="geraAlerta/geraAlertaAPS.md",
envir=new.env())
markdownToHTML("geraAlerta/geraAlertaAPS.md", "html/AlertaAPS.html",fragment.only = TRUE)
knit(input="geraAlerta/geraAlertaAPS.rmd",quiet=TRUE,output="geraAlerta/geraAlertaAPS.md",
envir=new.env())
markdownToHTML("geraAlerta/geraAlertaAPS.md", "html/AlertaAPS.html",fragment.only = TRUE)
knit(input="geraAlerta/geraAlertaAPS.rmd",quiet=TRUE,output="geraAlerta/geraAlertaAPS.md",
envir=new.env())
markdownToHTML("geraAlerta/geraAlertaAPS.md", "html/AlertaAPS.html",fragment.only = TRUE)
knit(input="geraAlerta/geraAlertaAPS.rmd",quiet=TRUE,output="geraAlerta/geraAlertaAPS.md",
markdownToHTML("geraAlerta/geraAlertaAPS.md", "geraAlerta/AlertaAPS.html",fragment.only = TRUE)
knit(input="geraAlerta/geraAlertaAPS.rmd",quiet=TRUE,output="geraAlerta/geraAlertaAPS.md",
envir=new.env())
markdownToHTML("geraAlerta/geraAlertaAPS.md", "geraAlerta/AlertaAPS.html",fragment.only = TRUE)
dc <- d3[d3$APS=="AP1",c("SE","temp.min")]
dc <-na.omit(dc)
uSE <- max(dc$SE)
uSE
knit(input="geraAlerta/geraAlertaAPS.rmd",quiet=TRUE,output="geraAlerta/geraAlertaAPS.md",
envir=new.env())
markdownToHTML("geraAlerta/geraAlertaAPS.md", "geraAlerta/AlertaAPS.html",fragment.only = TRUE)
knit(input="geraAlerta/geraAlertaAPS.rmd",quiet=TRUE,output="geraAlerta/geraAlertaAPS.md",
envir=new.env())
markdownToHTML("geraAlerta/geraAlertaAPS.md", "geraAlerta/AlertaAPS.html",fragment.only = TRUE)
knit(input="geraAlerta/geraAlertaAPS.rmd",quiet=TRUE,output="geraAlerta/geraAlertaAPS.md",
envir=new.env())
markdownToHTML("geraAlerta/geraAlertaAPS.md", "geraAlerta/AlertaAPS.html",fragment.only = TRUE)
knit(input="geraAlerta/geraAlertaMRJ.rmd",quiet=TRUE,envir=new.env())
knit(input="geraAlerta/geraAlertaAPS.rmd",quiet=TRUE,envir=new.env())
markdownToHTML("geraAlerta/geraAlertaAPS.md", "geraAlerta/AlertaAPS.html",fragment.only = TRUE)
markdownToHTML("geraAlertaAPS.md", fragment.only = TRUE)
markdownToHTML("geraAlertaAPS.md", fragment.only = TRUE)
ls()
dir()
markdownToHTML("geraAlertaAPS.md", fragment.only = TRUE)
par(mfrow=c(3,1),mar=c(0,0,0,0))
plot(d4$temp.min[d4$APS==ap],type='l',axes=F)
text(10,0.9*max(d4$temp.min[d4$APS==ap]),"Temp>22",cex=1.4)
text(80,0.9*max(d4$temp.min[d4$APS==ap]),labels=as.character(ap),cex=1.4)
abline(v=which(d4$alertaTemp[d4$APS==ap]==1),col="grey",lwd=1.2)
plot(d4$Rt_est[d4$APS==ap],type='l',axes=F,col=2)
lines(d4$Rt[d4$APS==ap],col=1)
text(10,0.9*max(d4$Rt_est[d4$APS==ap]),"Rt>1",cex=1.4)
abline(v=which(d4$alertaRt1[d4$APS==ap]==1),col="grey",lwd=1.2)
plot(d4$casos_est[d4$APS==ap],type='l',axes=F,col=2)
lines(d4$casos[d4$APS==ap])
abline(v=which(d4$alertaCasos[d4$APS==ap]==1),col="grey",lwd=1.2)
text(20,0.9*max(d4$casos[d4$APS==ap]),"casos>media+2sd",cex=1.4)
par(mfrow=c(3,1),mar=c(0,0,0,0))
plot(d4$temp.min[d4$APS==ap],type='l',axes=F)
text(50,0.9*max(d4$temp.min[d4$APS==ap]),"Temp>22",cex=1.4)
text(100,0.9*max(d4$temp.min[d4$APS==ap]),"Temp>22",cex=1.4)
plot(d4$temp.min[d4$APS==ap],type='l'
)
0.9*max(d4$temp.min[d4$APS==ap])
text(10,0.9*max(d4$temp.min[d4$APS==ap],na.rm=TRUE),"Temp>22",cex=1.4)
par(mfrow=c(3,1),mar=c(0,0,0,0))
plot(d4$temp.min[d4$APS==ap],type='l',axes=F)
text(10,0.9*max(d4$temp.min[d4$APS==ap],na.rm=TRUE),"Temp>22",cex=1.4)
text(80,0.9*max(d4$temp.min[d4$APS==ap],na.rm=TRUE),labels=as.character(ap),cex=1.4)
text(100,0.9*max(d4$temp.min[d4$APS==ap],na.rm=TRUE),labels=as.character(ap),cex=1.4)
text(100,0.99*max(d4$temp.min[d4$APS==ap],na.rm=TRUE),labels=as.character(ap),cex=1.4)
abline(v=which(d4$alertaTemp[d4$APS==ap]==1),col="grey",lwd=1.2)
plot(d4$Rt_est[d4$APS==ap],type='l',axes=F,col=2)
lines(d4$Rt[d4$APS==ap],col=1)
plot(d4$Rt_est[d4$APS==ap],type='l',axes=F,col=2,ylim=c(0,2))
lines(d4$Rt[d4$APS==ap],col=1)
plot(d4$Rt[d4$APS==ap],type='l',axes=F,col=2,ylim=c(0,2))
lines(d4$Rt_est[d4$APS==ap],col=1)
plot(d4$Rt[d4$APS==ap],type='l',axes=F,col=2,ylim=c(0,2))
axes(2)
axis(2)
par(mfrow=c(3,1),mar=c(0,4,0,0))
plot(d4$temp.min[d4$APS==ap],type='l',axes=F)
text(10,0.9*max(d4$temp.min[d4$APS==ap],na.rm=TRUE),"Temp>22",cex=1.4)
par(mfrow=c(3,1),mar=c(0,4,0,0))
plot(d4$temp.min[d4$APS==ap],type='l',axes=F,ylab="Temperatura")
text(10,0.9*max(d4$temp.min[d4$APS==ap],na.rm=TRUE),"Temp>22",cex=1.4)
text(1,0.9*max(d4$temp.min[d4$APS==ap],na.rm=TRUE),"Temp>22",cex=1.4)
par(mfrow=c(3,1),mar=c(0,4,0,0))
plot(d4$temp.min[d4$APS==ap],type='l',axes=F,ylab="Temperatura")
text(5,0.9*max(d4$temp.min[d4$APS==ap],na.rm=TRUE),"Temp>22",cex=1.4)
text(100,0.99*max(d4$temp.min[d4$APS==ap],na.rm=TRUE),labels=as.character(ap),cex=1.4)
abline(v=which(d4$alertaTemp[d4$APS==ap]==1),col="grey",lwd=1.2)
plot(d4$Rt[d4$APS==ap],type='l',axes=F,col=1,ylim=c(0,2))
par(mfrow=c(3,1),mar=c(0,4,0,0))
plot(d4$temp.min[d4$APS==ap],type='l',axes=F,ylab="Temperatura")
text(5,0.9*max(d4$temp.min[d4$APS==ap],na.rm=TRUE),"Temp>22",cex=1.4)
text(100,0.99*max(d4$temp.min[d4$APS==ap],na.rm=TRUE),labels=as.character(ap),cex=1.4)
abline(v=which(d4$alertaTemp[d4$APS==ap]==1),col="grey",lwd=1.2)
axis(2)
plot(d4$Rt[d4$APS==ap],type='l',axes=F,col=1,ylim=c(0,2))
plot(d4$Rt[d4$APS==ap],type='l',axes=F,col=1,ylim=c(0,2),ylab="Rt")
lines(d4$Rt_est[d4$APS==ap],col=2)
axis(2)
text(10,0.9*max(d4$Rt_est[d4$APS==ap]),"Rt>1",cex=1.4)
abline(v=which(d4$alertaRt1[d4$APS==ap]==1),col="grey",lwd=1.2)
plot(d4$casos_est[d4$APS==ap],type='l',axes=F,col=2,axes=FALSE)
lines(d4$casos[d4$APS==ap])
plot(d4$casos_est[d4$APS==ap],type='l',axes=F,col=2,ylab="")
lines(d4$casos[d4$APS==ap])
axis(2)
abline(v=which(d4$alertaCasos[d4$APS==ap]==1),col="grey",lwd=1.2)
text(20,0.9*max(d4$casos[d4$APS==ap]),"casos>media+2sd",cex=1.4)
par(mfrow=c(3,1),mar=c(0,4,0,0))
plot(d4$temp.min[d4$APS==ap],type='l',axes=F,ylab="Temperatura")
text(5,0.9*max(d4$temp.min[d4$APS==ap],na.rm=TRUE),"Temp>22",cex=1.4)
text(100,0.99*max(d4$temp.min[d4$APS==ap],na.rm=TRUE),labels=as.character(ap),cex=1.4)
abline(v=which(d4$alertaTemp[d4$APS==ap]==1),col="grey",lwd=1.2)
axis(2)
plot(d4$Rt[d4$APS==ap],type='l',axes=F,col=1,ylim=c(0,2),ylab="Rt")
lines(d4$Rt_est[d4$APS==ap],col=2)
axis(2)
text(10,0.9*max(d4$Rt_est[d4$APS==ap]),"Rt>1",cex=1.4)
abline(v=which(d4$alertaRt1[d4$APS==ap]==1),col="grey",lwd=1.2)
plot(d4$casos_est[d4$APS==ap],type='l',axes=F,col=2,ylab="",ylab="casos")
lines(d4$casos[d4$APS==ap])
axis(2)
abline(v=which(d4$alertaCasos[d4$APS==ap]==1),col="grey",lwd=1.2)
text(20,0.9*max(d4$casos[d4$APS==ap]),"casos>media+2sd",cex=1.4)
par(mfrow=c(3,1),mar=c(0,4,0,0))
plot(d4$temp.min[d4$APS==ap],type='l',axes=F,ylab="Temperatura")
text(5,0.9*max(d4$temp.min[d4$APS==ap],na.rm=TRUE),"Temp>22",cex=1.4)
text(100,0.99*max(d4$temp.min[d4$APS==ap],na.rm=TRUE),labels=as.character(ap),cex=1.4)
abline(v=which(d4$alertaTemp[d4$APS==ap]==1),col="grey",lwd=1.2)
axis(2)
plot(d4$Rt[d4$APS==ap],type='l',axes=F,col=1,ylim=c(0,2),ylab="Rt")
lines(d4$Rt_est[d4$APS==ap],col=2)
axis(2)
text(10,0.9*max(d4$Rt_est[d4$APS==ap]),"Rt>1",cex=1.4)
abline(v=which(d4$alertaRt1[d4$APS==ap]==1),col="grey",lwd=1.2)
plot(d4$casos_est[d4$APS==ap],type='l',axes=F,col=2,ylab="casos")
lines(d4$casos[d4$APS==ap])
axis(2)
abline(v=which(d4$alertaCasos[d4$APS==ap]==1),col="grey",lwd=1.2)
text(20,0.9*max(d4$casos[d4$APS==ap]),"casos>media+2sd",cex=1.4)
par(mfrow=c(3,1),mar=c(0,4,0,0))
plot(d4$temp.min[d4$APS==ap],type='l',axes=F,ylab="Temperatura>22")
text(100,0.99*max(d4$temp.min[d4$APS==ap],na.rm=TRUE),labels=as.character(ap),cex=1.4)
abline(v=which(d4$alertaTemp[d4$APS==ap]==1),col="grey",lwd=1.2)
axis(2)
plot(d4$Rt[d4$APS==ap],type='l',axes=F,col=1,ylim=c(0,2),ylab="Rt>1")
lines(d4$Rt_est[d4$APS==ap],col=2)
axis(2)
abline(v=which(d4$alertaRt1[d4$APS==ap]==1),col="grey",lwd=1.2)
plot(d4$casos_est[d4$APS==ap],type='l',axes=F,col=2,ylab="casos>media+2sd")
lines(d4$casos[d4$APS==ap])
axis(2)
abline(v=which(d4$alertaCasos[d4$APS==ap]==1),col="grey",lwd=1.2)
par(mfrow=c(3,1),mar=c(0,4,0,0))
plot(d4$temp.min[d4$APS==ap],type='l',axes=F,ylab="Temperatura>22")
text(100,0.99*max(d4$temp.min[d4$APS==ap],na.rm=TRUE),labels=as.character(ap),cex=1.4)
abline(v=which(d4$alertaTemp[d4$APS==ap]==1),col="grey",lwd=1.2)
axis(2)
plot(d4$Rt[d4$APS==ap],type='l',axes=F,col=1,ylim=c(0,3),ylab="Rt>1")
lines(d4$Rt_est[d4$APS==ap],col=2)
axis(2)
abline(v=which(d4$alertaRt1[d4$APS==ap]==1),col="grey",lwd=1.2)
plot(d4$casos_est[d4$APS==ap],type='l',axes=F,col=2,ylab="casos>media+2sd")
lines(d4$casos[d4$APS==ap])
axis(2)
abline(v=which(d4$alertaCasos[d4$APS==ap]==1),col="grey",lwd=1.2)
knit(input="geraAlerta/geraAlertaAPS.rmd",quiet=TRUE,envir=new.env())
markdownToHTML("geraAlertaAPS.md", fragment.only = TRUE)
?markdownToHTML
markdownToHTML("geraAlertaMRJ.md")
markdownToHTML("geraAlertaMRJ.md",output="AlertaMRJ.html",fragment.only = TRUE)
markdownToHTML("geraAlertaAPS.md",output="AlertaAPS.html", fragment.only = TRUE)
knit(input="geraAlerta/geraAlertaAPS.rmd",quiet=TRUE,envir=new.env())
markdownToHTML("geraAlertaAPS.md",output="AlertaAPS.html", fragment.only = TRUE)
names(d4)
le = length(d4$temp.min[d4$APS==listaAP[1]])
le
knit(input="geraAlerta/geraAlertaAPS.rmd",quiet=TRUE,envir=new.env())
markdownToHTML("geraAlertaAPS.md",output="AlertaAPS.html", fragment.only = TRUE)
library(knitr)
library(markdown)
library(lubridate)
library(xts)
require(foreign)
rm(list=ls())
novosinan <- "dados_brutos/sinan/Dengue2014_23_06_2014.dbf"
novoclima <- "dados_brutos/clima/galeao_dia_01012010-15062014.csv"
ult_tweet_limpo <- "dados_limpos/tweet_201424.csv"
ultimotweet_diario<-"dados_brutos/tweet/tweet_18062014_24062014.csv"
penultimotweet_diario<-"dados_brutos/tweet/tweet_11062014_17062014.csv"
knit(input="organizaDados/organizasinan2014.rmd",quiet=TRUE,
output="organizaDados/organizasinan2014.md",envir=new.env())
knit(input="organizaDados/organizatweets.rmd",quiet=TRUE,
output="organizaDados/organizatweets.md",envir=new.env())
knit(input="organizaDados/organizaTemperatura2.rmd",quiet=TRUE,
output="organizaDados/organizaTemperatura2.md",envir=new.env())
markdownToHTML("organizaDados/organizasinan2014.md", "html/html-organizacao/organizasinan2014.html",fragment.only = TRUE)
markdownToHTML("organizaDados/organizasinan2014.md", "html/html-organizacao/organizatweets.html",fragment.only = TRUE)
markdownToHTML("organizaDados/organizasinan2014.md", "html/html-organizacao/organizaTemperatura.html",fragment.only = TRUE)
dengueRJlimpo <- "dados_limpos/sinanRJ_201425.csv"
# Casos de Dengue por APS (formato: sinanAPS_*.csv)
dengueAPSlimpo <-"dados_limpos/sinanAP_201425.csv"
# Tweets (formato: tweet_*.csv)
twlimpo<- "dados_limpos/tweet_201425.csv"
# Clima (formato: temp_*.csv)
climalimpo<-"dados_limpos/temp_201425.csv"
knit(input="organizaDados/juntaTudo.rmd",output="organizaDados/juntaTudo.md",quiet=FALSE, envir=new.env())
markdownToHTML("organizaDados/juntaTudo.md", "html/html-organizacao/juntaTudo.html",fragment.only = TRUE)
dadosMRJ <- "dados_limpos/dadosMRJ_201425.csv"
dadosAPS<-"dados_limpos/dadosAPS_201425.csv"
knit(input="geraAlerta/geraAlertaMRJ.rmd",quiet=TRUE,envir=new.env())
knit(input="geraAlerta/geraAlertaAPS.rmd",quiet=TRUE,envir=new.env())
markdownToHTML("geraAlertaMRJ.md",output="AlertaMRJ.html",fragment.only = TRUE)
markdownToHTML("geraAlertaAPS.md",output="AlertaAPS.html", fragment.only = TRUE)
ult_tweet_limpo <- "dados_limpos/tweet_201425.csv"
ultimotweet_diario<-"dados_brutos/tweet/tweet_18062014_24062014.csv"
penultimotweet_diario<-"dados_brutos/tweet/tweet_11062014_17062014.csv"
knit(input="organizaDados/organizasinan2014.rmd",quiet=TRUE,
output="organizaDados/organizasinan2014.md",envir=new.env())
knit(input="organizaDados/organizatweets.rmd",quiet=TRUE,
output="organizaDados/organizatweets.md",envir=new.env())
knit(input="organizaDados/organizaTemperatura2.rmd",quiet=TRUE,
output="organizaDados/organizaTemperatura2.md",envir=new.env())
markdownToHTML("organizaDados/organizasinan2014.md", "html/html-organizacao/organizasinan2014.html",fragment.only = TRUE)
markdownToHTML("organizaDados/organizasinan2014.md", "html/html-organizacao/organizatweets.html",fragment.only = TRUE)
markdownToHTML("organizaDados/organizasinan2014.md", "html/html-organizacao/organizaTemperatura.html",fragment.only = TRUE)
dengueRJlimpo <- "dados_limpos/sinanRJ_201425.csv"
dengueAPSlimpo <-"dados_limpos/sinanAP_201425.csv"
twlimpo<- "dados_limpos/tweet_201425.csv"
climalimpo<-"dados_limpos/temp_201425.csv"
knit(input="organizaDados/juntaTudo.rmd",output="organizaDados/juntaTudo.md",quiet=FALSE, envir=new.env())
markdownToHTML("organizaDados/juntaTudo.md", "html/html-organizacao/juntaTudo.html",fragment.only = TRUE)
