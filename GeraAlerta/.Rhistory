d2$Rti <- d2$Rt1
d2$Rti[is.na(d2$Rti)]<-d2$Rtw[is.na(d2$Rti)]
d2$Rti[is.na(d2$Rt1)]<-d2$Rtw[is.na(d2$Rt1)]
d2$Rti <- d2$Rt1
d2$Rti[is.na(d2$Rt1)]<-d2$Rtw[is.na(d2$Rt1)]
d2$Rti[is.na(d2$Rt)]<-d2$Rtw[is.na(d2$Rt)]
for(i in 1:10) d2$Rtgreat1[d2$APS==listaAPS[i]] <-Rtgreat1(d2$pRti[d2$APS==listaAPS[i]],pcrit=0.90,lag=0)
for(i in 1:10) d2$ac.Rtgreat1[d2$APS==listaAPS[i]] <-Rtgreat1(d2$pRti[d2$APS==listaAPS[i]],pcrit=0.90,lag=3)
par(mfrow=c(5,2),mar=c(1,2,1,1))
for (j in 1:10) {
plot(d2$pRt1[d2$APS==listaAPS[j]],ylim=range(0,1),xlab="",ylab="Rt",axes=FALSE,type="l")
lines(d2$pRti[d2$APS==listaAPS[j]],col=3)
axis(2)
mtext(listaAPS[(j)],cex=0.8,line=-1)
box()
abline(h=0.8,col=2)
}
par(mfrow=c(5,2),mar=c(1,2,1,1))
for (j in 1:10) {
plot(d2$pRt1[d2$APS==listaAPS[j]],ylim=range(0,1),xlab="",ylab="Rt",axes=FALSE,type="l")
axis(2)
mtext(listaAPS[(j)],cex=0.8,line=-1)
box()
abline(h=0.8,col=2)
}
fillCasos <- function(casos, Rt){
casos_est <- casos
n <- which(is.na(casos_est))
casos_est[n]<-casos[(n-2)]*mean(Rt[(n-2):n],na.rm=TRUE)
casos_est
}
fillCasos <- function(casos, Rt){
casos_est <- casos
n <- which(is.na(casos_est))
casos_est[n]<-casos[(n-2)]*mean(Rt[(n-2):n],na.rm=TRUE)
casos_est
}
for(i in 1:10) d2$casos_est[d2$APS==listaAPS[i]]<-fillCasos((d2$casos[d2$APS==listaAPS[i]]),d2$Rt[d2$APS==listaAPS[i]])
d2[d2$SE==max(d2$SE),]
d2$inc <- d2$casos_est/d2$Pop2010*100000
d2[d2$SE==max(d2$SE),]
d2$alertaCasos <- as.numeric(d2$inc>100)
d2[d2$SE==max(d2$SE),]
le = length(d2$temp.min[d2$APS==listaAP[1]])
le = length(d2$temp.min[d2$APS==listaAPS[1]])
plot.alerta<-function(ap){
par(mai=c(0,0,0,0),mar=c(4,4,1,1))
d4v <- subset(d2,APS==ap)
plot(1:le,d4v$casos,type="l",axes=F,ylab="casos",xlab="")
abline(v=which(d4v$alertaTemp==1),col="grey",lwd=1.2)
abline(v=which(d4v$alertaRt1==1),col="red",lwd=0.5,lty=2)
lines(1:le,d4v$casos)
title(as.character(ap),cex=1.4)
axis(2)
axis(1,at=seq(1,length(d4v$SE),by=6),labels=d4$SE[seq(1,length(d4v$SE),by=6)],las=2)
#plot(1:le,d4$Rt[d4$APS==ap],type='l',axes=F,col=1,ylim=c(0,3),ylab="Rt>1")
#lines(1:le,d4$Rt_est[d4$APS==ap],col=2)
#axis(2)
#abline(v=which(d4$alertaRt1[d4$APS==ap]==1),col="grey",lwd=1.2)
#plot(1:le,d4$casos_est[d4$APS==ap],type='l',axes=F,col=2,ylab="casos>media+2sd")
#lines(1:le,d4$casos[d4$APS==ap])
#axis(2)
#abline(v=which(d4$alertaCasos[d4$APS==ap]==1),col="grey",lwd=1.2)
}
d2$Cli
names(d2)
le = length(d2$temp.min[d2$APS==listaAPS[1]])
plot.alerta<-function(ap){
par(mai=c(0,0,0,0),mar=c(4,4,1,1))
d2v <- subset(d2,APS==ap)
plot(1:le,d2v$casos,type="l",axes=F,ylab="casos",xlab="")
abline(v=which(d2v$Cli==3),col="grey",lwd=1.2)
abline(v=which(d2v$ac.Rtgreat1==1),col="red",lwd=0.5,lty=2)
lines(1:le,d2v$casos)
title(as.character(ap),cex=1.4)
axis(2)
axis(1,at=seq(1,le,by=6),labels=d4$SE[seq(1,le,by=6)],las=2)
}
for(i in 1:10) {
print(as.character(listaAP[i]))
print(tail(d2[d2$APS==listaAP[i],c("SE","APS","Cli","ac.Rtgreat1","alertaCasos")]))
plot.alerta(listaAP[i])
}
for(i in 1:10) {
print(as.character(listaAPS[i]))
print(tail(d2[d2$APS==listaAPS[i],c("SE","APS","Cli","ac.Rtgreat1","alertaCasos")]))
plot.alerta(listaAPS[i])
}
plot.alerta<-function(ap){
par(mai=c(0,0,0,0),mar=c(4,4,1,1))
d2v <- subset(d2,APS==ap)
plot(1:le,d2v$casos,type="l",axes=F,ylab="casos",xlab="")
abline(v=which(d2v$Cli==3),col="grey",lwd=1.2)
abline(v=which(d2v$ac.Rtgreat1==1),col="red",lwd=0.5,lty=2)
lines(1:le,d2v$casos)
title(as.character(ap),cex=1.4)
axis(2)
axis(1,at=seq(1,le,by=6),labels=d2v$SE[seq(1,le,by=6)],las=2)
}
for(i in 1:10) {
print(as.character(listaAPS[i]))
print(tail(d2[d2$APS==listaAPS[i],c("SE","APS","Cli","ac.Rtgreat1","alertaCasos")]))
plot.alerta(listaAPS[i])
}
par(mfrow=c(5,2))
for(i in 1:10) {
print(as.character(listaAPS[i]))
print(tail(d2[d2$APS==listaAPS[i],c("SE","APS","Cli","ac.Rtgreat1","alertaCasos")]))
plot.alerta(listaAPS[i])
}
d2v$ac.Rtgreat1
d2$ac.Rtgreat1
plot.alerta<-function(ap){
par(mai=c(0,0,0,0),mar=c(4,4,1,1))
d2v <- subset(d2,APS==ap)
plot(1:le,d2v$casos,type="l",axes=F,ylab="casos",xlab="")
abline(v=which(d2v$Cli==3),col="grey",lwd=1.2)
abline(v=which(d2v$ac.Rtgreat1>=3),col="red",lwd=0.5,lty=2)
lines(1:le,d2v$casos)
title(as.character(ap),cex=1.4)
axis(2)
axis(1,at=seq(1,le,by=6),labels=d2v$SE[seq(1,le,by=6)],las=2)
}
par(mfrow=c(5,2))
for(i in 1:10) {
print(as.character(listaAPS[i]))
print(tail(d2[d2$APS==listaAPS[i],c("SE","APS","Cli","ac.Rtgreat1","alertaCasos")]))
plot.alerta(listaAPS[i])
}
plot.alerta<-function(ap){
par(mai=c(0,0,0,0),mar=c(4,4,1,1))
d2v <- subset(d2,APS==ap)
plot(1:le,d2v$casos,type="l",axes=F,ylab="casos",xlab="")
abline(v=which(d2v$Cli==3),col="grey",lwd=1.2)
abline(v=which(d2v$ac.Rtgreat1>=1),col="red",lwd=0.5,lty=2)
lines(1:le,d2v$casos)
title(as.character(ap),cex=1.4)
axis(2)
axis(1,at=seq(1,le,by=6),labels=d2v$SE[seq(1,le,by=6)],las=2)
}
par(mfrow=c(5,2))
for(i in 1:10) {
print(as.character(listaAPS[i]))
print(tail(d2[d2$APS==listaAPS[i],c("SE","APS","Cli","ac.Rtgreat1","alertaCasos")]))
plot.alerta(listaAPS[i])
}
plot.alerta<-function(ap){
par(mai=c(0,0,0,0),mar=c(4,4,1,1))
d2v <- subset(d2,APS==ap)
plot(1:le,d2v$casos,type="l",axes=F,ylab="casos",xlab="")
abline(v=which(d2v$Cli==3),col="grey",lwd=1.2)
abline(v=which(d2v$ac.Rtgreat1>=2),col="red",lwd=0.5,lty=2)
lines(1:le,d2v$casos)
title(as.character(ap),cex=1.4)
axis(2)
axis(1,at=seq(1,le,by=6),labels=d2v$SE[seq(1,le,by=6)],las=2)
}
par(mfrow=c(5,2))
for(i in 1:10) {
print(as.character(listaAPS[i]))
print(tail(d2[d2$APS==listaAPS[i],c("SE","APS","Cli","ac.Rtgreat1","alertaCasos")]))
plot.alerta(listaAPS[i])
}
plot.alerta<-function(ap){
par(mai=c(0,0,0,0),mar=c(4,4,1,1))
d2v <- subset(d2,APS==ap)
plot(1:le,d2v$casos,type="l",axes=F,ylab="casos",xlab="")
abline(v=which(d2v$Cli==3),col="grey",lwd=1.2)
abline(v=which(d2v$ac.Rtgreat1>=3),col="red",lwd=0.5,lty=2)
lines(1:le,d2v$casos)
title(as.character(ap),cex=1.4)
axis(2)
axis(1,at=seq(1,le,by=6),labels=d2v$SE[seq(1,le,by=6)],las=2)
}
par(mfrow=c(5,2))
for(i in 1:10) {
print(as.character(listaAPS[i]))
print(tail(d2[d2$APS==listaAPS[i],c("SE","APS","Cli","ac.Rtgreat1","alertaCasos")]))
plot.alerta(listaAPS[i])
}
for(i in 1:10) d2$Rtgreat1[d2$APS==listaAPS[i]] <-Rtgreat1(d2$pRti[d2$APS==listaAPS[i]],pcrit=0.80,lag=0)
for(i in 1:10) d2$ac.Rtgreat1[d2$APS==listaAPS[i]] <-Rtgreat1(d2$pRti[d2$APS==listaAPS[i]],pcrit=0.80,lag=3)
fillCasos <- function(casos, Rt){
casos_est <- casos
n <- which(is.na(casos_est))
casos_est[n]<-casos[(n-2)]*mean(Rt[(n-2):n],na.rm=TRUE)
casos_est
}
for(i in 1:10) d2$casos_est[d2$APS==listaAPS[i]]<-fillCasos((d2$casos[d2$APS==listaAPS[i]]),d2$Rt[d2$APS==listaAPS[i]])
d2$inc <- d2$casos_est/d2$Pop2010*100000
d2$alertaCasos <- as.numeric(d2$inc>100)
par(mfrow=c(5,2))
for(i in 1:10) {
print(as.character(listaAPS[i]))
print(tail(d2[d2$APS==listaAPS[i],c("SE","APS","Cli","ac.Rtgreat1","alertaCasos")]))
plot.alerta(listaAPS[i])
}
plot.alerta<-function(ap){
par(mai=c(0,0,0,0),mar=c(4,4,1,1))
d2v <- subset(d2,APS==ap)
plot(1:le,d2v$casos,type="l",axes=F,ylab="casos",xlab="")
abline(v=which(d2v$Cli==3),col="grey",lwd=1.2)
abline(v=which(d2v$ac.Rtgreat1>=3),col="red",lwd=0.5,lty=2)
lines(1:le,d2v$casos)
points(v=which(d2v$inc>=100),col="red",pch=16)
title(as.character(ap),cex=1.4)
axis(2)
axis(1,at=seq(1,le,by=6),labels=d2v$SE[seq(1,le,by=6)],las=2)
}
par(mfrow=c(5,2))
for(i in 1:10) {
print(as.character(listaAPS[i]))
print(tail(d2[d2$APS==listaAPS[i],c("SE","APS","Cli","ac.Rtgreat1","alertaCasos")]))
plot.alerta(listaAPS[i])
}
names(d2)
plot.alerta<-function(ap){
par(mai=c(0,0,0,0),mar=c(4,4,1,1))
d2v <- subset(d2,APS==ap)
plot(1:le,d2v$casos,type="l",axes=F,ylab="casos",xlab="")
abline(v=which(d2v$Cli==3),col="yellow",lwd=1.2)
abline(v=which(d2v$ac.Rtgreat1>=3),col="orange",lwd=0.5,lty=2)
lines(1:le,d2v$casos)
abline(which(d2v$inc>=100),col="red",pch=16)
title(as.character(ap),cex=1.4)
axis(2)
axis(1,at=seq(1,le,by=6),labels=d2v$SE[seq(1,le,by=6)],las=2)
}
par(mfrow=c(5,2))
for(i in 1:10) {
print(as.character(listaAPS[i]))
print(tail(d2[d2$APS==listaAPS[i],c("SE","APS","Cli","ac.Rtgreat1","alertaCasos")]))
plot.alerta(listaAPS[i])
}
plot.alerta<-function(ap){
par(mai=c(0,0,0,0),mar=c(4,4,1,1))
d2v <- subset(d2,APS==ap)
plot(1:le,d2v$casos,type="l",axes=F,ylab="casos",xlab="")
abline(v=which(d2v$Cli==3),col="yellow",lwd=1.2)
abline(v=which(d2v$ac.Rtgreat1>=3),col="orange",lwd=0.7,lty=2)
lines(1:le,d2v$casos)
abline(v=which(d2v$inc>=100),col="red",pch=16)
title(as.character(ap),cex=1.4)
axis(2)
axis(1,at=seq(1,le,by=6),labels=d2v$SE[seq(1,le,by=6)],las=2)
}
par(mfrow=c(5,2))
for(i in 1:10) {
print(as.character(listaAPS[i]))
print(tail(d2[d2$APS==listaAPS[i],c("SE","APS","Cli","ac.Rtgreat1","alertaCasos")]))
plot.alerta(listaAPS[i])
}
plot.alerta<-function(ap){
par(mai=c(0,0,0,0),mar=c(4,4,1,1))
d2v <- subset(d2,APS==ap)
plot(1:le,d2v$casos,type="l",axes=F,ylab="casos",xlab="")
abline(v=which(d2v$Cli<3),col="green",lwd=1.2)
abline(v=which(d2v$Cli>=3),col="yellow",lwd=1.2)
abline(v=which(d2v$ac.Rtgreat1>=3),col="orange",lty=2)
lines(1:le,d2v$casos)
abline(v=which(d2v$inc>=100),col="red",pch=16)
title(as.character(ap),cex=1.4)
axis(2)
axis(1,at=seq(1,le,by=6),labels=d2v$SE[seq(1,le,by=6)],las=2)
}
par(mfrow=c(5,2))
for(i in 1:10) {
print(as.character(listaAPS[i]))
print(tail(d2[d2$APS==listaAPS[i],c("SE","APS","Cli","ac.Rtgreat1","alertaCasos")]))
plot.alerta(listaAPS[i])
}
le = length(d2$temp.min[d2$APS==listaAPS[1]])
plot.alerta<-function(ap){
par(mai=c(0,0,0,0),mar=c(4,4,1,1))
d2v <- subset(d2,APS==ap)
plot(1:le,d2v$casos,type="l",axes=F,ylab="casos",xlab="")
abline(v=which(d2v$Cli<3),col="green",lwd=1.2)
abline(v=which(d2v$Cli>=3),col="yellow",lwd=1.2)
abline(v=which(d2v$ac.Rtgreat1>=3),col="orange")
lines(1:le,d2v$casos)
abline(v=which(d2v$inc>=100),col="red",pch=16)
title(as.character(ap),cex=1.4)
axis(2)
axis(1,at=seq(1,le,by=6),labels=d2v$SE[seq(1,le,by=6)],las=2)
}
par(mfrow=c(5,2))
for(i in 1:10) {
print(as.character(listaAPS[i]))
print(tail(d2[d2$APS==listaAPS[i],c("SE","APS","Cli","ac.Rtgreat1","alertaCasos")]))
plot.alerta(listaAPS[i])
}
plot.alerta<-function(ap){
par(mai=c(0,0,0,0),mar=c(4,4,1,1))
d2v <- subset(d2,APS==ap)
plot(1:le,d2v$casos,type="l",axes=F,ylab="casos",xlab="")
abline(v=1:le,col="green",lwd=1.2)
abline(v=which(d2v$Cli>=3),col="yellow",lwd=1.2)
abline(v=which(d2v$ac.Rtgreat1>=3),col="orange")
lines(1:le,d2v$casos)
abline(v=which(d2v$inc>=100),col="red",pch=16)
title(as.character(ap),cex=1.4)
axis(2)
axis(1,at=seq(1,le,by=6),labels=d2v$SE[seq(1,le,by=6)],las=2)
}
par(mfrow=c(5,2))
for(i in 1:10) {
print(as.character(listaAPS[i]))
print(tail(d2[d2$APS==listaAPS[i],c("SE","APS","Cli","ac.Rtgreat1","alertaCasos")]))
plot.alerta(listaAPS[i])
}
plot.alerta<-function(ap){
par(mai=c(0,0,0,0),mar=c(4,4,1,1))
d2v <- subset(d2,APS==ap)
plot(1:le,d2v$casos,type="l",axes=F,ylab="casos",xlab="")
abline(v=1:le,col="green",lwd=1)
abline(v=which(d2v$Cli>=3),col="yellow",lwd=1)
abline(v=which(d2v$ac.Rtgreat1>=3),col="orange")
lines(1:le,d2v$casos)
abline(v=which(d2v$inc>=100),col="red",pch=16)
title(as.character(ap),cex=1.4)
axis(2)
axis(1,at=seq(1,le,by=6),labels=d2v$SE[seq(1,le,by=6)],las=2)
}
par(mfrow=c(5,2))
for(i in 1:10) {
print(as.character(listaAPS[i]))
print(tail(d2[d2$APS==listaAPS[i],c("SE","APS","Cli","ac.Rtgreat1","alertaCasos")]))
plot.alerta(listaAPS[i])
}
plot.alerta<-function(ap){
par(mai=c(0,0,0,0),mar=c(4,4,1,1))
d2v <- subset(d2,APS==ap)
plot(1:le,d2v$casos,type="l",axes=F,ylab="casos",xlab="")
abline(v=1:le,col="green",lwd=1)
abline(v=which(d2v$Cli>=3),col="white",lwd=1)
abline(v=which(d2v$Cli>=3),col="yellow",lwd=1)
abline(v=which(d2v$ac.Rtgreat1>=3),col="white")
abline(v=which(d2v$ac.Rtgreat1>=3),col="orange")
lines(1:le,d2v$casos)
abline(v=which(d2v$inc>=100),col="red",pch=16)
title(as.character(ap),cex=1.4)
axis(2)
axis(1,at=seq(1,le,by=6),labels=d2v$SE[seq(1,le,by=6)],las=2)
}
par(mfrow=c(5,2))
for(i in 1:10) {
print(as.character(listaAPS[i]))
print(tail(d2[d2$APS==listaAPS[i],c("SE","APS","Cli","ac.Rtgreat1","alertaCasos")]))
plot.alerta(listaAPS[i])
}
plot.alerta<-function(ap){
par(mai=c(0,0,0,0),mar=c(4,4,1,1))
d2v <- subset(d2,APS==ap)
plot(1:le,d2v$casos,type="l",axes=F,ylab="casos",xlab="")
abline(v=1:le,col="green",lwd=1)
#    abline(v=which(d2v$Cli>=3),col="white",lwd=1)
abline(v=which(d2v$Cli>=3),col="yellow",lwd=1)
#    abline(v=which(d2v$ac.Rtgreat1>=3),col="white")
#    abline(v=which(d2v$ac.Rtgreat1>=3),col="orange")
lines(1:le,d2v$casos)
abline(v=which(d2v$inc>=100),col="red",pch=16)
title(as.character(ap),cex=1.4)
axis(2)
axis(1,at=seq(1,le,by=6),labels=d2v$SE[seq(1,le,by=6)],las=2)
}
par(mfrow=c(5,2))
for(i in 1:10) {
print(as.character(listaAPS[i]))
print(tail(d2[d2$APS==listaAPS[i],c("SE","APS","Cli","ac.Rtgreat1","alertaCasos")]))
plot.alerta(listaAPS[i])
}
le = length(d2$temp.min[d2$APS==listaAPS[1]])
plot.alerta<-function(ap){
par(mai=c(0,0,0,0),mar=c(4,4,1,1))
d2v <- subset(d2,APS==ap)
plot(1:le,d2v$casos,type="l",axes=F,ylab="casos",xlab="")
abline(v=1:le,col="green",lwd=1)
#    abline(v=which(d2v$Cli>=3),col="white",lwd=1)
abline(v=which(d2v$Cli>=3),col="yellow",lwd=1)
#    abline(v=which(d2v$ac.Rtgreat1>=3),col="white")
#    abline(v=which(d2v$ac.Rtgreat1>=3),col="orange")
lines(1:le,d2v$casos)
#    abline(v=which(d2v$inc>=100),col="red",pch=16)
title(as.character(ap),cex=1.4)
axis(2)
axis(1,at=seq(1,le,by=6),labels=d2v$SE[seq(1,le,by=6)],las=2)
}
par(mfrow=c(5,2))
for(i in 1:10) {
print(as.character(listaAPS[i]))
print(tail(d2[d2$APS==listaAPS[i],c("SE","APS","Cli","ac.Rtgreat1","alertaCasos")]))
plot.alerta(listaAPS[i])
}
le = length(d2$temp.min[d2$APS==listaAPS[1]])
plot.alerta<-function(ap){
par(mai=c(0,0,0,0),mar=c(4,4,1,1))
d2v <- subset(d2,APS==ap)
plot(1:le,d2v$casos,type="l",axes=F,ylab="casos",xlab="")
#    abline(v=1:le,col="green",lwd=1)
#    abline(v=which(d2v$Cli>=3),col="white",lwd=1)
abline(v=which(d2v$Cli>=3),col="yellow",lwd=1)
#    abline(v=which(d2v$ac.Rtgreat1>=3),col="white")
#    abline(v=which(d2v$ac.Rtgreat1>=3),col="orange")
lines(1:le,d2v$casos)
#    abline(v=which(d2v$inc>=100),col="red",pch=16)
title(as.character(ap),cex=1.4)
axis(2)
axis(1,at=seq(1,le,by=6),labels=d2v$SE[seq(1,le,by=6)],las=2)
}
par(mfrow=c(5,2))
for(i in 1:10) {
print(as.character(listaAPS[i]))
print(tail(d2[d2$APS==listaAPS[i],c("SE","APS","Cli","ac.Rtgreat1","alertaCasos")]))
plot.alerta(listaAPS[i])
}
?par
le = length(d2$temp.min[d2$APS==listaAPS[1]])
plot.alerta<-function(ap){
par(mai=c(0,0,0,0),mar=c(4,4,1,1))
d2v <- subset(d2,APS==ap)
plot(1:le,d2v$casos,type="l",axes=F,ylab="casos",xlab="",bg="green")
#    abline(v=1:le,col="green",lwd=1)
#    abline(v=which(d2v$Cli>=3),col="white",lwd=1)
abline(v=which(d2v$Cli>=3),col="yellow",lwd=1)
#    abline(v=which(d2v$ac.Rtgreat1>=3),col="white")
#    abline(v=which(d2v$ac.Rtgreat1>=3),col="orange")
lines(1:le,d2v$casos)
#    abline(v=which(d2v$inc>=100),col="red",pch=16)
title(as.character(ap),cex=1.4)
axis(2)
axis(1,at=seq(1,le,by=6),labels=d2v$SE[seq(1,le,by=6)],las=2)
}
par(mfrow=c(5,2))
for(i in 1:10) {
print(as.character(listaAPS[i]))
print(tail(d2[d2$APS==listaAPS[i],c("SE","APS","Cli","ac.Rtgreat1","alertaCasos")]))
plot.alerta(listaAPS[i])
}
```
plot.alerta<-function(ap){
par(mai=c(0,0,0,0),mar=c(4,4,1,1))
d2v <- subset(d2,APS==ap)
plot(1:le,d2v$casos,type="l",axes=F,ylab="casos",xlab="",bg="green")
#    abline(v=1:le,col="green",lwd=1)
#    abline(v=which(d2v$Cli>=3),col="white",lwd=1)
abline(v=which(d2v$Cli>=3),col="yellow",lwd=1)
#    abline(v=which(d2v$ac.Rtgreat1>=3),col="white")
#    abline(v=which(d2v$ac.Rtgreat1>=3),col="orange")
lines(1:le,d2v$casos)
#    abline(v=which(d2v$inc>=100),col="red",pch=16)
title(as.character(ap),cex=1.4)
axis(2)
axis(1,at=seq(1,le,by=6),labels=d2v$SE[seq(1,le,by=6)],las=2)
}
par(mfrow=c(5,2))
for(i in 1:10) {
print(as.character(listaAPS[i]))
print(tail(d2[d2$APS==listaAPS[i],c("SE","APS","Cli","ac.Rtgreat1","alertaCasos")]))
plot.alerta(listaAPS[i])
}
plot.alerta<-function(ap){
par(mai=c(0,0,0,0),mar=c(4,4,1,1))
d2v <- subset(d2,APS==ap)
plot(1:le,d2v$casos,type="l",axes=F,ylab="casos",xlab="")
abline(v=which(d2v$Cli>=3),col="grey",lwd=1)
abline(v=which(d2v$ac.Rtgreat1>=3),col="yellow")
lines(1:le,d2v$casos)
abline(v=which(d2v$inc>=100),col="red",pch=16)
title(as.character(ap),cex=1.4)
axis(2)
axis(1,at=seq(1,le,by=6),labels=d2v$SE[seq(1,le,by=6)],las=2)
}
par(mfrow=c(5,2))
for(i in 1:10) {
print(as.character(listaAPS[i]))
print(tail(d2[d2$APS==listaAPS[i],c("SE","APS","Cli","ac.Rtgreat1","alertaCasos")]))
plot.alerta(listaAPS[i])
}
install.packages("outbreaker")
library(knitr)
library(markdown)
#library(lubridate)
library(xts)
require(foreign)
rm(list=ls())
#--------------
#Etapa inicial:
#-------------
#1) Verificar se ha dados novos em:
#     sftp://alertadengue@200.20.164.152
#     senha: Sqv4tRoh8GNayFoR
#2) Copiar os dados novos  na subpasta correpondente em /dados_brutos/
#=============================
# A. Para organizar os dados novos:
# ============================
# Selecione os novos dados:
# A1. Ultimos dados de dengue:
# esse e' o unico que precisa ser nominalmente indicado aqui. O dbf deve estar na pasta indicada no path do novosinan
#--------------------------
novosinan <- "dados_brutos/sinan/Dados_dengue_25_08_2014.dbf"
knit(input="organizaDados/organizasinan2014.rmd",quiet=TRUE,
output="organizaDados/organizasinan2014.md",envir=new.env())
setwd("~/Documentos/AlertaDengueAnalise/GeraAlerta")
knit(input="organizaDados/organizasinan2014.rmd",quiet=TRUE,
output="organizaDados/organizasinan2014.md",envir=new.env())
# A2. Ultimos dados de temperatura:
#-----------------------------
#(atualmente so uma estacao - galeao)
#novoclima <- "dados_brutos/clima/galeao_01012010-15062014.csv" # antigo
# atualmente capta direto da internet galeao<- read.csv2("http://gtsinan.no-ip.biz:8081/alerta/galeao.csv")
knit(input="organizaDados/organizaTemperatura2.rmd",quiet=TRUE,
output="organizaDados/organizaTemperatura2.md",envir=new.env())
