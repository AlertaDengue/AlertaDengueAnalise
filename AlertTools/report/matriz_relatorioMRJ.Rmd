---
title: "Info Dengue Rio"
author: "Relatório de situação da dengue na cidade do Rio de Janeiro"
output: pdf_document
geometry: margin=0.5in
fontsize: 12pt
---

```{r echo=FALSE}
# <a name="voltaini"></a>
```

```{r setup, include=FALSE}
opts_chunk$set(dev = 'pdf')
```

```{r echo=FALSE}
hoje <- Sys.Date()
#SEhoje <- data2SE(hoje,format="%Y-%m-%d")
```

**Rio de Janeiro, `r as.character(hoje)`**


Confira a situação da dengue na cidade do Rio de Janeiro. Mais detalhes, ver: [info.dengue.mat.br](info.dengue.mat.br) 

## Índice {#top}
* [Mapa](#mapa)
* [Na cidade](#tab1)
* [Dados por APS](#aps)
* [Notas](#notas)

**Código de Cores do Alerta por APS**

*Verde (atividade baixa)*
   temperatura < 22 graus por 3 semanas 
   atividade de tweet normal (não aumentada)
   ausência de transmissão sustentada

*Amarelo (Alerta)*
   temperatura > 22C por mais de 3 semanas
   ou atividade de tweet aumentada

*Laranja (Transmissão sustentada)*
  número reprodutivo >1 por 3 semanas

*Vermelho (atividade alta)*
 incidência acima do percentil 90 (100:100.000 habitantes)

\newpage

### Mapa da Cidade do Rio de Janeiro {#mapa}

As sub-divisões são as áreas programáticas da saúde. Verde indica atividade baixa, amarelo indica vulnerabilidade, laranja indica transmissão sustentada e vermelho indica incidência acima do percentil 90.

```{r fig.align='center',  echo=FALSE, message=TRUE, warning=TRUE}

map.Rio(alerio,data = 201613, shapefile = "../../CAPS_SMS.shp")
```

Veja o mapa interativo em [Alerta Dengue](http://alerta.dengue.mat.br)
<br> </br>
<p> </p>

\newpage

<br> </br>

### <a name="tab1"></a> Situação da dengue na cidade do Rio de Janeiro

```{r echo=FALSE}

totcrude <- aggregate(res$casos,by=list(res$se),sum)
totest<-aggregate(res$casos_est,by=list(res$se),sum)
totmin<-aggregate(res$casos_est_min,by=list(res$se),sum)
totmax<-aggregate(res$casos_est_max,by=list(res$se),sum)

cidade<-cbind(totcrude,totest$x,totmin$x,totmax$x)
names(cidade)<-c("se","casos","casos.estimados","ICmin","ICmax")
cidade$inc <- cidade$casos/6.5e6*100000
dt<-subset(res,aps=="1.0")[,c("se","tweet")]  # tweets
dc <- aggregate(res[,"tmin"],by=list(se=res$se),FUN=mean,na.rm=TRUE) #clima
names(dc)[2]<-"tmin"
cidade<- merge(cidade,dt,by="se")
cidade<- merge(cidade,dc,by="se")
```


```{r echo=FALSE}
cidade <- subset(cidade,se>=201101)
par(mfrow=c(3,1),mar=c(4,4,1,1))
plot(1:dim(cidade)[1],cidade$tweet,type="h",ylab="",axes=FALSE,xlab="",main="Tweets sobre dengue")
axis(2)

ymax <- max(110,max(cidade$inc))
plot(1:dim(cidade)[1],cidade$inc, type="l", xlab="",ylab="incidência (por 100.000)",axes=FALSE,main="Dengue",ylim=c(0,ymax))
abline(h=14, lty=2, col="blue")
abline(h=100, lty=2, col="red")
text(mean(1:dim(cidade)[1]),14,"limiar pré epidêmico",col="blue",cex=0.8)
text(mean(1:dim(cidade)[1]),100,"limiar alta atividade",col="red",cex=0.8)
axis(2)

plot(1:dim(cidade)[1],cidade$tmin,type="l",ylab="temperatura",axes=FALSE,xlab="",main="Temperatura mínima")
abline(h=22, lty=2, col=2)
axis(2)
le=dim(cidade)[1]
axis(1,at=rev(seq(le,1,by=-12)),labels=cidade$se[rev(seq(le,1,by=-12))],las=2)
text(mean(1:dim(cidade)[1]),22,"temp crítica",col=2, cex=0.8)
```


\newpage

Últimas 6 semanas:

- SE: semana epidemiológica
- casos: número de casos de dengue no SINAN
- casos_corrigidos: estimativa do número de casos notificados (ver [Notas](#notas))
- tweets: número de tweets relatando sintomas de dengue (ver [Notas](#notas))
- tmin: média das temperaturas mínimas da semana
- inc: incidência por 100.000 habitantes

```{r echo=FALSE}
library(pander)
panderOptions('table.split.table', Inf)
tab <- tail(cidade,n=6)
rownames(tab) <- NULL
pander(tab,compact=TRUE,)
```

\newpage


### Alerta por APS {#aps}
A linha tracejada azul indica o limiar pré-epidêmico; a linha tracejada vermelha indica o limiar de atividade alta (acima do qual é acionado o alerta vermelho). 

```{r, echo=FALSE}
inid = 201401
par(mfrow=c(5,2),mar=c(5,0,0,0))
ymax <- max(110,max(alerio[[1]]$data$inc[alerio[[1]]$data$SE > inid]))
for (i in 2:10) ymax <- max(ymax, max(alerio[[1]]$data$inc[alerio[[1]]$data$SE > inid]),yrange=c(0,ymax))

for (i in 1:10) {
      plot.alerta(alerio[[i]],var="inc",ini=201401,fim=max(alerio[[i]]$data$SE),yrange=c(0,ymax))
      mtext(names(alerio)[i],line=-1, cex=0.7)
      abline(h=100, lty=2, col="red")
      abline(h=14.15, lty=2, col="blue")
}

```

\newpage

### Tabelas com os dados das últimas quatro semanas por APS

casos not = casos notificados, casos est = casos estimados após correção do atraso de notificação, tmin = temperatura mínima da semana, Rt = número reprodutivo, se maior que 1, indica que os casos estão com tendência de aumento, prob(Rt > 1) = p-valor do teste se Rt >1,
inc = incidência por 100.000 habitantes, nivel de 1 a 4 indica verde a vermelho.

```{r echo=FALSE}
panderOptions('table.split.table', Inf)
apsnomes <- unique(res$aps)
message("Área Programática da Saúde 1.0")
ap=apsnomes[1]
tab<-tail(res[res$aps==ap,c("se","casos","casos_est","tmin","rt","p_rt1","inc","nivel")],n=4)
names(tab)<-c("SE","casos not","casos est","tmin","Rt","prob(Rt>1)","inc","nivel")
rownames(tab) <- NULL
```

<br> </br>

```{r echo=FALSE}
pander(tab)
```


```{r echo=FALSE}
message("Área Programática da Saúde 2.1")
ap=apsnomes[2]
tab<-tail(res[res$aps==ap,c("se","casos","casos_est","tmin","rt","p_rt1","inc","nivel")],n=4)
names(tab)<-c("SE","casos not","casos est","tmin","Rt","prob(Rt>1)","inc","nivel")
rownames(tab) <- NULL
```

<br> </br>


```{r echo=FALSE}
pander(tab)
```



```{r echo=FALSE}
message("Área Programática da Saúde 2.2")
ap=apsnomes[3]
tab<-tail(res[res$aps==ap,c("se","casos","casos_est","tmin","rt","p_rt1","inc","nivel")],n=4)
names(tab)<-c("SE","casos not","casos est","tmin","Rt","prob(Rt>1)","inc","nivel")
rownames(tab) <- NULL
```

<br> </br>


```{r echo=FALSE}
pander(tab)
```


```{r echo=FALSE}
message("Área Programática da Saúde 3.1")
ap=apsnomes[4]
tab<-tail(res[res$aps==ap,c("se","casos","casos_est","tmin","rt","p_rt1","inc","nivel")],n=4)
names(tab)<-c("SE","casos not","casos est","tmin","Rt","prob(Rt>1)","inc","nivel")
rownames(tab) <- NULL
```

<br> </br>

\newpage

```{r echo=FALSE}
pander(tab)
```


```{r echo=FALSE}

message("Área Programática da Saúde 3.2")
ap=apsnomes[5]
tab<-tail(res[res$aps==ap,c("se","casos","casos_est","tmin","rt","p_rt1","inc","nivel")],n=4)
names(tab)<-c("SE","casos not","casos est","tmin","Rt","prob(Rt>1)","inc","nivel")
rownames(tab) <- NULL
```

<br> </br>


```{r echo=FALSE}
pander(tab)
```

```{r echo=FALSE}
ap=apsnomes[6]

message("Área Programática da Saúde 3.3")
tab<-tail(res[res$aps==ap,c("se","casos","casos_est","tmin","rt","p_rt1","inc","nivel")],n=4)
names(tab)<-c("SE","casos not","casos est","tmin","Rt","prob(Rt>1)","inc","nivel")
rownames(tab) <- NULL
```

<br> </br>

```{r echo=FALSE}
pander(tab)
```

```{r echo=FALSE}
ap=apsnomes[7]

message("Área Programática da Saúde 4.0")
tab<-tail(res[res$aps==ap,c("se","casos","casos_est","tmin","rt","p_rt1","inc","nivel")],n=4)
names(tab)<-c("SE","casos not","casos est","tmin","Rt","prob(Rt>1)","inc","nivel")
rownames(tab) <- NULL
```

<br> </br>


```{r echo=FALSE}
pander(tab)
```


```{r echo=FALSE}

message("Área Programática da Saúde 5.1")
ap=apsnomes[8]
tab<-tail(res[res$aps==ap,c("se","casos","casos_est","tmin","rt","p_rt1","inc","nivel")],n=4)
names(tab)<-c("SE","casos not","casos est","tmin","Rt","prob(Rt>1)","inc","nivel")
rownames(tab) <- NULL
```

<br> </br>


```{r echo=FALSE}
pander(tab)
```



```{r echo=FALSE}

message("Área Programática da Saúde 5.2")
ap=apsnomes[9]
tab<-tail(res[res$aps==ap,c("se","casos","casos_est","tmin","rt","p_rt1","inc","nivel")],n=4)
names(tab)<-c("SE","casos not","casos est","tmin","Rt","prob(Rt>1)","inc","nivel")
rownames(tab) <- NULL
```

<br> </br>


```{r echo=FALSE}
pander(tab)
```


```{r echo=FALSE}
ap=apsnomes[10]

message("Área Programática da Saúde 5.3")
tab<-tail(res[res$aps==ap,c("se","casos","casos_est","tmin","rt","p_rt1","inc","nivel")],n=4)
names(tab)<-c("SE","casos not","casos est","tmin","Rt","prob(Rt>1)","inc","nivel")
rownames(tab) <- NULL
```

<br> </br>


```{r echo=FALSE}
pander(tab)
```
[volta](#top)

<br> </br>


\newpage

### Notas {#notas}


- Os dados do sinan mais recentes ainda não foram totalmente digitados. Estimamos o número esperado de casos
notificados considerando o tempo ate os casos serem digitados.
- Os dados de tweets são gerados pelo Observatório de Dengue (UFMG). Os tweets são processados para exclusão de informes e outros temas relacionados a dengue
- Algumas vezes, os casos da última semana ainda não estao disponiveis, nesse caso, usa-se uma estimação com base na tendência de variação da serie 

Créditos
------
Esse e um projeto desenvolvido em parceria pela Fiocruz, FGV e Prefeitura do Rio de Janeiro, com apoio da SVS/MS

Mais detalhes do projeto , ver: [www.dengue.mat.br](www.dengue.mat.br) 

<br> </br>
------------
<br> </br>




[volta](#top)
